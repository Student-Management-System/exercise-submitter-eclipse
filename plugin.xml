<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>

    <extension
        point="org.eclipse.ui.menus">
        
        <menuContribution
            locationURI="popup:org.eclipse.ui.popup.any?after=additions">
            
            <visibleWhen>
                <reference
                    definitionId="net.ssehub.teaching.exercise_submitter.eclipse.isProject">
                </reference>
            </visibleWhen>
            
            <menu
                id="net.ssehub.teaching.exercise_submitter.eclipse"
                label="Exercise Submitter (New)">
                
                <command
                    commandId="net.ssehub.teaching.exercise_submitter.eclipse.submit"
                    tooltip="Submit the selected project" />
            </menu>
        </menuContribution>
    </extension>
    
    <extension
        point="org.eclipse.ui.commands">
        
        <command
            id="net.ssehub.teaching.exercise_submitter.eclipse.submit"
            name="Submit" />
    </extension>
    
    <extension
        point="org.eclipse.ui.handlers">
        
        <handler
            commandId="net.ssehub.teaching.exercise_submitter.eclipse.submit"
            class="net.ssehub.teaching.exercise_submitter.eclipse.actions.SubmitAction" />
    </extension>
    
    <extension
        point="org.eclipse.core.expressions.definitions">
        
        <definition id="net.ssehub.teaching.exercise_submitter.eclipse.isProject">
            <with
                variable="activeMenuSelection">
                <iterate ifEmpty="false">
                    <adapt type="org.eclipse.core.resources.IProject" />
                </iterate>
            </with>
        </definition>
    </extension>

</plugin>
